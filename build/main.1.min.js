"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}window.onload=function(){var s=function(){function t(e){_classCallCheck(this,t),this.order=t.getUniqId(e)}return _createClass(t,null,[{key:"getUniqId",value:function(e){var t=function(e){return Math.floor(1+Math.random()*e)},i=t(e);if(this.randomCache.length<e){for(;this.randomCache.includes(i);)i=t(e);return this.randomCache.push(i),i}return this.randomCache=[],null}}]),t}();s.randomCache=[];var t=new(function(){function t(e){_classCallCheck(this,t),this.li=e,this.emptyField=null,this.fields=[],this.copyOfLi=Array.from(e).map(function(e){return e.cloneNode(!0)})}return _createClass(t,[{key:"init",value:function(){for(var e=this.boardSize,t=0;t<e;t+=1){if(t===e-1){this.fields.push(null);break}var i=new s(this.boardSize-1);this.fields.push(i)}this.setEmptyPosition(),this.solvable(this.fields)||(console.log("solvabled"),this.swap(0,1)),this.render(),console.log(this.fields)}},{key:"shuffle",value:function(){this.init()}},{key:"setEmptyPosition",value:function(){this.emptyField=this.fields.indexOf(null)}},{key:"swap",value:function(e,t){var i=this.fields[e];this.fields[e]=this.fields[t],this.fields[t]=i}},{key:"isCompleted",value:function(){return!this.fields.some(function(e,t){if(e)return 0<e.order&&e.order-1!==t})}},{key:"solvable",value:function(e){for(var t=0,i=1,s=e.length-1;i<s;i++)for(var n=i-1;0<=n;n--)e[n].order>e[i].order&&t++;return!(t%2)}},{key:"moveDown",value:function(){var e=this.emptyField-this.sideLength;0<=e&&(this.swap(this.emptyField,e),this.setEmptyPosition())}},{key:"moveUp",value:function(){var e=this.emptyField+this.sideLength;e<this.fields.length&&(this.swap(this.emptyField,e),this.setEmptyPosition())}},{key:"moveLeft",value:function(){var e=this.emptyField+1;e<this.fields.length&&(this.swap(this.emptyField,e),this.setEmptyPosition())}},{key:"moveRight",value:function(){var e=this.emptyField-1;0<=e&&this.emptyField!==this.sideLength&&this.emptyField!==2*this.sideLength&&(this.swap(this.emptyField,e),this.setEmptyPosition())}},{key:"render",value:function(){var i=this,s=document.getElementsByClassName("puzzle")[0];s.innerHTML="",this.fields.forEach(function(e,t){e?(i.copyOfLi[e.order-1].classList.remove("marginRight"),i.copyOfLi[e.order-1].classList.remove("marginLeft"),s.appendChild(i.copyOfLi[e.order-1])):i.copyOfLi[t]}),0===this.emptyField||6===this.emptyField||3===this.emptyField?s.getElementsByTagName("li")[this.emptyField].classList.add("marginLeft"):s.getElementsByTagName("li")[this.emptyField-1].classList.add("marginRight"),this.isCompleted()&&console.log("DONE")}},{key:"boardSize",get:function(){return this.li.length+1}},{key:"sideLength",get:function(){return Math.sqrt(this.boardSize)}}]),t}())(document.getElementsByClassName("puzzle")[0].getElementsByClassName("tile"));(window.board=t).init(),window.addEventListener("keydown",function(e){switch(e.keyCode){case 37:t.moveLeft(),t.render();break;case 39:t.moveRight(),t.render();break;case 38:t.moveUp(),t.render();break;case 40:t.moveDown(),t.render()}})};